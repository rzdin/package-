
pipeline {
    agent any
    environment {
        bucket = "sam-jenkins-demo-us-west-2-ranaziauddin"
        region = "us-east-1"
        aws_credential = "AWSReservedSSO_AdministratorAccess_564bcbbbca5e5655/rzdin@enquizit.com"
        application_name = "Nodejs"
       
       
    }
     stages{
         stage('pull artifact') {
             steps {
                   step([  $class: 'CopyArtifact',
                           filter: 'myapp.zip',
                           fingerprintArtifacts: true,
                           projectName: '${my_package_jenkins_job}',
                           selector: [$class: 'SpecificBuildSelector' '${BUILD_TIMESTAMP}'] ])
                  unzip zipFile: 'myapp.zip', dir: './my_package_jenkins_job'
                                 
    }
  }
        stage("Upload"){
            steps{
                withAWS(credentials: "${aws_credential}", region: "${region}"){
                s3Upload(file:"myapp_${BUILD_TIMESTAMP}_${TAG_NAME_DEV}", bucket:"${bucket}")
               
                  }
            }
        }
     }
   }
    
  
      
    
               
               
    
                
               
                 
      
